remote <%= @ipaddress %> {
   exchange_mode main;
   my_identifier address <%=node['ipaddress']%>;
<% @encryption_algorithms.each_key do |hash| -%>
<%   @encryption_algorithms[hash].each do |crypto| -%>
   proposal {
      authentication_method pre_shared_key;
      hash_algorithm <%= hash %>;
      encryption_algorithm <%= crypto %>;
      lifetime <%= node['racoon']['lifetime'] %>;
      dh_group 2;
   }

<%   end -%>
<% end -%>
}

